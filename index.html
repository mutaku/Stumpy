<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="viewport" content="width=640" />

    <link rel="stylesheet" href="stylesheets/core.css" media="screen"/>
    <link rel="stylesheet" href="stylesheets/mobile.css" media="handheld, only screen and (max-device-width:640px)"/>
    <link rel="stylesheet" href="stylesheets/pygment_trac.css"/>

    <script type="text/javascript" src="javascripts/modernizr.js"></script>
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
    <script type="text/javascript" src="javascripts/headsmart.min.js"></script>
    <script type="text/javascript">
      $(document).ready(function () {
        $('#main_content').headsmart()
      })
    </script>
    <title>Stumpy by mutaku</title>
  </head>

  <body>
    <a id="forkme_banner" href="https://github.com/mutaku/Stumpy">Fork Me on GitHub</a>
    <div class="shell">

      <header>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <h1>Stumpy</h1>
            <h2>URL Shortener in Django</h2>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
      </header>

      <section id="downloads">
        <span class="inner">
          <a href="https://github.com/mutaku/Stumpy/zipball/master" class="zip"><em>download</em> .ZIP</a><a href="https://github.com/mutaku/Stumpy/tarball/master" class="tgz"><em>download</em> .TGZ</a>
        </span>
      </section>

      <span class="banner-fix"></span>

      <section id="main_content">
        <h1>STUMPy</h1>

<p><em>Mutaku URL Shortener</em></p>

<h3>WHAT IS STUMPY?</h3>

<p>STUMPy is a URL shortener written by xiao_haozi (Mutaku) using the django python web framework.</p>

<h3>WHY STUMPY?</h3>

<p>There are many url shorteners out there, and STUMPy does not do anything groundbreaking.
However, there are several benefits that encouraged it's development:</p>

<ul>
<li>you keep all the data and can access it at your will</li>
<li>you keep all the code and can access/change it at your will</li>
<li>simple to use, simple to run, and simple code</li>
<li>because of it's simplicity, it is easy to understand how url shorteners work and some of the possible optimizations</li>
<li>uses the django framework which allows for easy expansion, management, and tweaking</li>
<li>django also allows for a nice web UI for administration of all of the data</li>
</ul><h3>REQUIREMENTS:</h3>

<p>{requirement [link for source]}</p>

<ul>
<li>"Python":<a href="http://www.python.org/getit/">http://www.python.org/getit/</a></li>
<li>"Django":<a href="http://docs.djangoproject.com/en/1.3/intro/install/">http://docs.djangoproject.com/en/1.3/intro/install/</a></li>
<li>"HTML5lib":<a href="http://code.google.com/p/html5lib/">http://code.google.com/p/html5lib/</a></li>
<li>"Bleach":<a href="https://github.com/jsocol/bleach">https://github.com/jsocol/bleach</a></li>
</ul><h3>INSTALLATION, SETUP, AND TESTING:</h3>

<p>See: "Django Install":<a href="http://docs.djangoproject.com/en/1.3/intro/install/">http://docs.djangoproject.com/en/1.3/intro/install/</a>
Once you have django installed and running, you can checkout the repo and test things out in a few steps.</p>

<p>►Grab the latest release with git.</p>

<p><code>git clone https://mutaku@github.com/mutaku/Stumpy.git</code></p>

<p>►Setup a mysql database that stumpy can access.</p>

<pre><code>create database stumpy;
grant all on stumpy.* to 'SOMEUSER@localhost' identified by "SOMEPASS";
flush privilieges;
</code></pre>

<p>►Copy the local_settings.py.dist file to local_settings.py .</p>

<p><code>cp local_settings.py.dist local_settings.py</code></p>

<p>►If you do not have a SECRET_KEY generated in Django you will need to generate one by running the keygen script and copy that key into your local_settings.py file in the next step.</p>

<p><code>python gimme_key.py</code></p>

<p>►Edit the local_settings.py file and add in your appropriate database variables and your secret key you already had from django or the one you generated above.</p>

<p>►Sync the database to the models.</p>

<p><code>python manage.py syncdb</code></p>

<p>►Fire up the server and navigate to /admin in your browser. Go to sites-&gt;sites and edit the domain name to match the domain you are using. This will initially be set to 'example.com'.</p>

<p><code>python manage.py runserver</code></p>

<h3>PRODUCTION RUNNING:</h3>

<p>See: "Deploying Django":<a href="http://docs.djangoproject.com/en/1.3/howto/deployment/">http://docs.djangoproject.com/en/1.3/howto/deployment/</a>
Once you have your webserver setup to serve the static files, you can set DEBUG=False. Without doing so, static files will not be served up by Django in production mode (DEBUG=False).
Additionally, ensure that you have set your proper FQDN through the admin interface as mentioned in the last step of the setup section.</p>

<p>I have included an example fastcgi script (stumpy.fcgi) that you may point to with your webserver to run Stumpy in a production setting.
The following is an example of a stanza that you could use with Lighttpd to serve up Stumpy.</p>

<pre><code>$HTTP["host"] =~ "example.com" {
  server.document-root = "/home/JohnDoe/Stumpy/"
  fastcgi.server = ( ".fcgi" =&gt;
                     ( "localhost" =&gt; (
             "socket" =&gt; "/var/lib/lighttpd/stumpy-fastcgi.socket",
                         "bin-path" =&gt; "/home/JohnDoe/Stumpy/stumpy.fcgi",
                         "check-local" =&gt; "disable",
                         "min-procs" =&gt; 2,
             "max-procs" =&gt; 4,
                       )
                     ),
                   )
  alias.url = ( "/static/admin"  =&gt; "/home/JohnDoe/django/contrib/admin/media/" )
  url.rewrite-once = ( "^(/static/.*)$" =&gt; "$1",
                       "^/favicon\.ico$" =&gt; "/static/favicon.ico",
               "^(/.*)$" =&gt; "/stumpy.fcgi$1" )
}
</code></pre>

<h3>USAGE:</h3>

<p>You will probably be able to see from the urls.py how to go about using Stumpy. Here's the rundown:</p>

<ul>
<li><p>[site]/       -&gt;  index view (recent stumps, popular stumps, and the bookmarklet)</p></li>
<li><p>[site]/[shorturl]     -&gt;  grab shorturl and redirect</p></li>
<li><p>[site]/register       -&gt;  register new user [for users - admin can add through admin interface]</p></li>
<li><p>[site]/admin      *-&gt; admin interface </p></li>
<li><p>[site]/url/?l=[longurl]   *-&gt; shorten url [this is how the bookmarklet does it] [needs to be escaped if not using bookmarklet]</p></li>
</ul><p>*-&gt; These views require authenticated_user and uses sessions</p>

<h3>NOTES:</h3>

<p>A bookmarklet is ready to use and can be found by visiting the index page ("/") and dragging the 'stumpy it!' link to your bookmarks bar.</p>

<p>To add additional users that may submit URLs, add the user via the admin interface. They do not need to have any admin interface abilities to simply login and and submit URLs.
If you want a user to have permission to edit and delete urls (why?) you would have to enable those permissions in the user management in the admin interface.</p>

<h3>FAQ:</h3>

<p>[coming soon]</p>

<h3>HELP:</h3>

<p>Most of the information you might need can be found in the Django docs here: "Django":<a href="http://www.djangoproject.com/">http://www.djangoproject.com/</a>
For Stumpy specific help, see "Stumpy":<a href="https://github.com/mutaku/Stumpy">https://github.com/mutaku/Stumpy</a></p>
      </section>

      <footer>
        <span class="ribbon-outer">
          <span class="ribbon-inner">
            <p>this project by <a href="https://github.com/mutaku">mutaku</a> can be found on <a href="https://github.com/mutaku/Stumpy">GitHub</a></p>
          </span>
          <span class="left-tail"></span>
          <span class="right-tail"></span>
        </span>
        <p>Generated with <a href="http://pages.github.com">GitHub Pages</a> using Merlot</p>
        <span class="octocat"></span>
      </footer>

    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("<script type="text/javascript">    var _gaq = _gaq || [];   _gaq.push(['_setAccount', 'UA-30545177-1']);   _gaq.push(['_trackPageview']);    (function() {     var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;     ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';     var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);   })();  </script>");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>

  </body>
</html>
